# Template file for 'redshift'
pkgname=redshift
version=1.12+git
revision=1
_commit=eb1b106b537990e8ef5df5af79f8d43ab2b98f28
wrksrc="${pkgname}-${_commit}"
build_style=gnu-configure
build_options="geoclue2"
configure_args="--enable-gui --enable-apparmor --disable-geoclue
 $(vopt_enable geoclue2)"
hostmakedepends="gettext-devel intltool pkg-config python3-devel
 autoconf automake libtool"
makedepends="libXxf86vm-devel libdrm-devel $(vopt_if geoclue2 'geoclue2
 glib-devel') wayland-devel"
depends="$(vopt_if geoclue2 'geoclue2')"
short_desc="Adjusts the color temperature of your screen to your surroundings"
maintainer="Juan RP <xtraeme@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="http://jonls.dk/redshift/"
distfiles="https://github.com/jonls/redshift/archive/${_commit}/${pkgname}.tar.gz"
checksum=589b0ad36751fd28810571729074a6dc328f125d7bf78a9d46825f99c2fd87b4

pre_configure() {
	./bootstrap
}

redshift-gtk_package() {
	depends="${sourcepkg}-${version}_${revision} gtk+3 python3-gobject
	 python3-xdg desktop-file-utils"
	pycompile_module="redshift_gtk"
	short_desc+=" - GTK+ UI"
	pkg_install() {
		vmove usr/bin/redshift-gtk
		vmove usr/lib
		vmove usr/share/applications
		vmove usr/share/icons
	}
}
